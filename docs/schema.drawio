<mxfile host="65bd71144e">
    <diagram id="yYRY7kELEUlrGU2YPHD8" name="Page-1">
        <mxGraphModel dx="2411" dy="1674" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="2" value="User Db" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="-360" y="-235" width="460" height="460" as="geometry"/>
                </mxCell>
                <mxCell id="3" value="writing db&lt;br&gt;(sharded by year)" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="250" y="410" width="420" height="420" as="geometry"/>
                </mxCell>
                <mxCell id="10" style="html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;" parent="1" source="4" target="9" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="4" value="writing" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="500" y="470" width="60" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="5" value="writing db &lt;br&gt;(sharded by year)" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="300" y="-405" width="420" height="420" as="geometry"/>
                </mxCell>
                <mxCell id="13" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="6" target="4" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="6" value="writing&lt;br&gt;(federated)" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="480" y="-150" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="7" value="Donation db&lt;br&gt;(sharded by year)" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="1030" y="-60" width="310" height="310" as="geometry"/>
                </mxCell>
                <mxCell id="14" value="likes" style="edgeStyle=orthogonalEdgeStyle;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;curved=1;" parent="1" source="8" target="4" edge="1">
                    <mxGeometry x="-0.8558" y="-7" relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="323" y="600"/>
                            <mxPoint x="530" y="600"/>
                        </Array>
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="22" style="edgeStyle=none;html=1;exitX=0;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;" parent="1" source="8" target="21" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="54" value="federated_user" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="22">
                    <mxGeometry x="0.0448" relative="1" as="geometry">
                        <mxPoint x="79" y="56" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="60" style="edgeStyle=orthogonalEdgeStyle;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;curved=1;" edge="1" parent="1" source="8" target="4">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="61" value="in_library" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="60">
                    <mxGeometry x="-0.223" y="1" relative="1" as="geometry">
                        <mxPoint x="-84" y="-9" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="62" style="edgeStyle=orthogonalEdgeStyle;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;curved=1;" edge="1" parent="1" source="8">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="530" y="530" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="63" value="in_reading_list" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="62">
                    <mxGeometry x="-0.4141" y="-1" relative="1" as="geometry">
                        <mxPoint x="-44" y="-9" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="64" style="edgeStyle=orthogonalEdgeStyle;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;curved=1;" edge="1" parent="1" source="8" target="4">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="65" value="read" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="64">
                    <mxGeometry x="-0.1888" y="2" relative="1" as="geometry">
                        <mxPoint x="-88" y="-3" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="66" value="subscribed" style="html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="8" target="24">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="8" value="user(fd)" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="280" y="625" width="50" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="9" value="Novel(og)&lt;br&gt;properties&lt;br&gt;&lt;br&gt;Uid [str]&lt;br&gt;title [str]&lt;br&gt;description [str]&lt;br&gt;years [array]&lt;br&gt;Ogyear [str / int]" style="whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="760" y="570" width="160" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="12" value="donation" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="1155" y="-50" width="60" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="17" style="edgeStyle=none;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;" parent="1" source="15" target="12" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="15" value="user(fd)" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="1060" y="20" width="50" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="18" style="edgeStyle=none;html=1;exitX=0;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;" parent="1" source="16" target="12" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="16" value="creator(fd)" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="1240" y="20" width="60" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="19" value="creation(fd)" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="1150" y="10" width="70" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="27" style="edgeStyle=none;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="21" target="26" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="45" style="edgeStyle=none;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;" parent="1" source="21" target="23" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="21" value="user (og)" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="-210" y="-160" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="48" style="edgeStyle=none;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="23" target="46" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="50" style="edgeStyle=none;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" parent="1" source="23" target="24" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="55" value="federated_creator" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="50">
                    <mxGeometry x="0.0861" y="-3" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="23" value="creator(og)" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="-90" y="-190" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="49" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="24" target="4" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="56" value="created" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="49">
                    <mxGeometry x="-0.2469" y="-1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="24" value="creator&lt;br&gt;(fd)" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="340" y="450" width="50" height="50" as="geometry"/>
                </mxCell>
                <object label="" federated_bookshelf="federated_bookshelf" id="51">
                    <mxCell style="edgeStyle=none;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="26" target="30" edge="1">
                        <mxGeometry relative="1" as="geometry"/>
                    </mxCell>
                </object>
                <mxCell id="53" value="federated_bookshelf" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="51">
                    <mxGeometry x="0.1208" y="-1" relative="1" as="geometry">
                        <mxPoint x="-58" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="26" value="bookshelf(og)" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="-310" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="29" value="bookshelf(og)&lt;br&gt;properties&lt;br&gt;&lt;br&gt;Years[array[" style="whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="-540" y="20" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="58" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="30" target="4">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="59" value="on_bookshelf" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="58">
                    <mxGeometry x="-0.1819" y="2" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="30" value="bookshelf&lt;br&gt;(fd)" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="410" y="520" width="60" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="40" value="&lt;h1&gt;Bookshelf query&lt;/h1&gt;&lt;div&gt;To fetch data for a spefic bookshelf, we need to query across the years the bookshelf spans.&lt;/div&gt;&lt;div&gt;Each time a new item is added to the bookshelf, if the year does not already exist on the bookshelf node, it is added.&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-780" y="-360" width="190" height="270" as="geometry"/>
                </mxCell>
                <mxCell id="41" value="&lt;h1&gt;Donation Query&lt;/h1&gt;&lt;div&gt;We want to be able to create a dashboard for both creators and users to keep track of their respective donations.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This model allows people to see their most recent donations. Upon individual inspection of each donation, they can see the corresponding user / creator and creation&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;However, this kind of inspection will require a separate query to the database to fetch that specific creation / creator.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;With regard to the creation, that means we will need to store the original year&lt;/div&gt;&lt;div&gt;on the federated creation node, unless we want to&amp;nbsp; query across all shard.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We can also show a creator a dashboard of all of their creations, along with the donations they've received for the year.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;How do we handle deletion?&lt;/div&gt;&lt;div&gt;We can retain the user node but delete all personal information, including username, nickname, email, and password.&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="1441" y="-49" width="430" height="400" as="geometry"/>
                </mxCell>
                <mxCell id="42" value="&lt;h1&gt;Library Query&lt;/h1&gt;&lt;p&gt;To load a users library, we start with items most recently added to their library. This means we can query by year.&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-780" y="-105" width="190" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="43" value="&lt;h1&gt;Like Query&lt;/h1&gt;&lt;p&gt;This basically can follow the same format as the library query&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-770" y="10" width="190" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="44" value="&lt;h1&gt;Loading Artists&lt;/h1&gt;&lt;p&gt;When a users is viewing their library, we want them to be able to view all of the artists whose works they have added into their lib, all of the artists they are following, and all of the artists they are subscribed to.&lt;/p&gt;&lt;p&gt;We'll then want them to be able to view all work by that individual artist&lt;/p&gt;&lt;p&gt;We can store the years that the artists work in a users library are from. We can also assess if the writer even actually has anything in the users library based on the relationship that they have. Then, we can query the database for their specific work using the years specified.&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-770" y="140" width="190" height="390" as="geometry"/>
                </mxCell>
                <mxCell id="46" value="&lt;h1&gt;Creator Props (OG)&lt;/h1&gt;&lt;p&gt;Name: string&lt;/p&gt;&lt;p&gt;ProfilePic: string&lt;/p&gt;&lt;p&gt;About: string&lt;/p&gt;&lt;p&gt;uid: string&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-50" y="-420" width="230" height="150" as="geometry"/>
                </mxCell>
                <mxCell id="67" value="&lt;h1&gt;Federated Writing&lt;/h1&gt;&lt;p&gt;Federated writing consists of the following types:&lt;/p&gt;&lt;p&gt;Novelette, novella, novel, collection, and universe&lt;/p&gt;&lt;p&gt;In addition to the standard writing attributes, federated types will have a year attribute that collects the years in which they appear.&lt;/p&gt;&lt;p&gt;Federated writing nodes will be exact replicas, so as to best aid search.&lt;/p&gt;&lt;p&gt;All data query data connected to federated nodes will also need to be copied i.e. tags.&lt;/p&gt;&lt;p&gt;Relationships outside of the creator / created relationship will exist only on the original node. So any new &quot;like&quot; relationships would be added to the original database, not subsequent years.&amp;nbsp;&lt;/p&gt;&lt;p&gt;Note: this could present a problem with reading lists, since a query could return a result without knowledge of whether or not it's on a user's reading list. So they could try to add it again.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="730" y="-499" width="240" height="450" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>